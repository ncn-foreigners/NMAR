% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/shared_bootstrap.R
\name{bootstrap_variance}
\alias{bootstrap_variance}
\title{Shared bootstrap variance helpers}
\usage{
bootstrap_variance(data, estimator_func, point_estimate, ...)
}
\arguments{
\item{data}{a `data.frame` or a `survey.design`.}

\item{estimator_func}{function that returns an S3 result object; the primary
estimate is extracted via `$y_hat` and convergence via `$converged`.}

\item{point_estimate}{numeric; point estimate used for some survey variance formulas.}

\item{...}{passed through to `estimator_func`.}
}
\description{
Internal helpers to estimate the variance of a scalar estimator
  via bootstrap resampling (IID data) or bootstrap replicate weights
  (survey designs). Designed to be reused across NMAR engines.
}
\details{
- For `data.frame` inputs, performs IID bootstrap by resampling rows and
    rerunning `estimator_func` on each resample, then computing the empirical
    variance of the replicate estimates.
  - For `survey.design` inputs, converts the design to a bootstrap
    replicate-weight design with `svrep::as_bootstrap_design()`, reconstructs
    the original sampling design for each replicate weight vector, and passes
    the resulting replicate estimates and replicate scaling factors to
    `survey::svrVar()`.

  `estimator_func` is typically an engine-level estimator (for example
  the EL engine) and is called with the same arguments used for the point
  estimate, except that the `data` argument is replaced by the resampled data
  (IID) or the replicate `survey.design` (survey).
}
\section{Progress Reporting}{

  If the optional \code{progressr} package is installed, bootstrap calls
  signal progress via a \code{progressr::progressor} inside
  \code{progressr::with_progress()}. Users control whether progress is shown
  (and how) by registering handlers with \code{progressr::handlers()}. When
  \code{progressr} is not installed or no handlers are active, bootstrap runs
  silently. Progress reporting is compatible with all future backends.
}

\section{Reproducibility}{

  For reproducible bootstrap results, always set a seed before calling
  the estimation function:

  \preformatted{
  set.seed(123)  # Set seed for reproducibility
  result <- nmar(Y ~ X, data = df,
                 engine = el_engine(variance_method = "bootstrap",
                                    bootstrap_reps = 500))
  }

  The \code{future} framework (via \code{future.seed = TRUE} in
  \code{future.apply::future_lapply()}) ensures that each bootstrap replicate
  uses an independent L'Ecuyer-CMRG random number stream derived from this
  seed. This gives reproducible results across supported future backends
  (sequential, multisession, cluster, and so on).
}

\keyword{internal}
