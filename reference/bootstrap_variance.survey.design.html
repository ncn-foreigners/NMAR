<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Bootstrap for survey designs via replicate weights — bootstrap_variance.survey.design • NMAR</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Bootstrap for survey designs via replicate weights — bootstrap_variance.survey.design"><meta name="description" content="Bootstrap for survey designs via replicate weights"><meta property="og:description" content="Bootstrap for survey designs via replicate weights"><meta property="og:image" content="https://ncn-foreigners.ue.poznan.pl/NMAR/index.html/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">NMAR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Tutorials</h6></li>
    <li><a class="dropdown-item" href="../articles/tutorial_empirical_likelihood.html">Empirical Likelihood</a></li>
    <li><a class="dropdown-item" href="../articles/tutorial_exptilt.html">Exponential Tilting</a></li>
    <li><a class="dropdown-item" href="../articles/tutorial_exptilt_nonparam.html">Exponential Tilting (Nonparametric)</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Theory</h6></li>
    <li><a class="dropdown-item" href="../articles/el_empirical_likelihood_theory.html">Empirical Likelihood Theory for NMAR</a></li>
    <li><a class="dropdown-item" href="../articles/exptilt_theory.html">Exponential Tilting Theory</a></li>
    <li><a class="dropdown-item" href="../articles/exptilt_nonparam_theory.html">Nonparametric Exponential Tilting Theory</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/index.html">More articles...</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ncn-foreigners/NMAR/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Bootstrap for survey designs via replicate weights</h1>
      <small class="dont-index">Source: <a href="https://github.com/ncn-foreigners/NMAR/blob/package-dev/R/shared_bootstrap.R" class="external-link"><code>R/shared_bootstrap.R</code></a></small>
      <div class="d-none name"><code>bootstrap_variance.survey.design.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Bootstrap for survey designs via replicate weights</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">bootstrap_variance.survey.design</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  <span class="va">estimator_func</span>,</span>
<span>  <span class="va">point_estimate</span>,</span>
<span>  bootstrap_reps <span class="op">=</span> <span class="fl">500</span>,</span>
<span>  survey_na_policy <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"strict"</span>, <span class="st">"omit"</span><span class="op">)</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>A <code>survey.design</code>.</p></dd>


<dt id="arg-estimator-func">estimator_func<a class="anchor" aria-label="anchor" href="#arg-estimator-func"></a></dt>
<dd><p>Function returning an object with a numeric scalar
component <code>y_hat</code> and an optional logical component <code>converged</code>.</p></dd>


<dt id="arg-point-estimate">point_estimate<a class="anchor" aria-label="anchor" href="#arg-point-estimate"></a></dt>
<dd><p>Numeric scalar; used for survey bootstrap variance
(passed to <code><a href="https://rdrr.io/pkg/survey/man/svrVar.html" class="external-link">survey::svrVar()</a></code> as <code>coef</code>).</p></dd>


<dt id="arg-bootstrap-reps">bootstrap_reps<a class="anchor" aria-label="anchor" href="#arg-bootstrap-reps"></a></dt>
<dd><p>integer; number of bootstrap replicates.</p></dd>


<dt id="arg-survey-na-policy">survey_na_policy<a class="anchor" aria-label="anchor" href="#arg-survey-na-policy"></a></dt>
<dd><p>Character string specifying how to handle replicates
that fail to produce estimates. Options:</p><dl><dt><code>"strict"</code></dt>
<dd><p>(default) Any failed replicate causes an error.
    This is a conservative default that makes instability explicit.</p></dd>

  <dt><code>"omit"</code></dt>
<dd><p>Failed replicates are omitted. The corresponding
    <code>rscales</code> are also omitted to maintain correct variance scaling.
    Use with caution: if failures are non-random, variance may be biased.</p></dd>


</dl></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Additional arguments. Some are consumed by <code><a href="bootstrap_variance.html">bootstrap_variance()</a></code>
itself (for example <code>resample_guard</code> for IID bootstrap or
<code>bootstrap_settings</code>/<code>bootstrap_options</code>/<code>bootstrap_type</code>/<code>bootstrap_mse</code>
for survey bootstrap); remaining arguments are forwarded to <code>estimator_func</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A list with components <code>se</code>, <code>variance</code>, and <code>replicates</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This path constructs a replicate-weight design using
  <code><a href="https://bschneidr.github.io/svrep/reference/as_bootstrap_design.html" class="external-link">svrep::as_bootstrap_design()</a></code> and evaluates the estimator on each set of
  bootstrap replicate analysis weights.</p>
<p>Replicate evaluation starts from a shallow template copy of the input survey
  design (including its ids/strata/fpc structure) and injects each replicate's
  analysis weights by
  updating the design's probability slots (<code>prob</code>/<code>allprob</code>) so that
  <code>weights(design)</code> returns the desired replicate weights (with
  zero weights represented as <code>prob = Inf</code>). This avoids replaying or
  reconstructing a <code><a href="https://rdrr.io/pkg/survey/man/svydesign.html" class="external-link">svydesign()</a></code> call and therefore supports designs
  created via <code><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset()</a></code> and <code><a href="https://rdrr.io/r/stats/update.html" class="external-link">update()</a></code>.</p>
<p><strong>NA policy:</strong> By default, survey bootstrap uses a strict NA policy:
  if any replicate fails to produce a finite estimate, the entire bootstrap
  fails with an error. Setting <code>survey_na_policy = "omit"</code> drops failed
  replicates (and their corresponding <code>rscales</code>) and proceeds with the
  remaining replicates.</p>
    </div>
    <div class="section level2">
    <h2 id="limitations">Limitations<a class="anchor" aria-label="anchor" href="#limitations"></a></h2>


<p><strong>Calibrated/post-stratified designs:</strong> Post-hoc adjustments applied
  via <code><a href="https://rdrr.io/pkg/survey/man/calibrate.html" class="external-link">survey::calibrate()</a></code>, <code><a href="https://rdrr.io/pkg/survey/man/postStratify.html" class="external-link">survey::postStratify()</a></code>, or
  <code><a href="https://rdrr.io/pkg/survey/man/rake.html" class="external-link">survey::rake()</a></code> are not supported here and will cause the function to
  error. These adjustments are not recomputed when replicate weights are
  injected, so the replicate designs would not reflect the intended
  calibrated/post-stratified analysis.</p>
    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Maciej Beręsewicz, Igor Kołodziej, Mateusz Iwaniuk.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

